<!DOCTYPE html>
<html>
<head>
     <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
</head>
<body>
    <form>
        <fieldset>
            <legend>Pageview</legend>
            <p>
                <input type="checkbox" name="pageload" checked="checked" class="event-rule"
                    data-event-name="pageload"
                    disabled
                />
                <label for="onload">On page load</label>
            </p>
            <p>
                <input type="checkbox" name="url_change" checked="checked" class="event-rule"
                    data-event-name="url_change"
                    data-event-type="url_change"
                />
                <label for="url_change">On URL change</label>
            </p>
            <p>
                <input type="checkbox" name="url_change_match" class="event-rule"
                    data-event-name="url_change_match"
                    data-event-val="url_match_val" />
                <label for="url_match">URL match</label>
            </p>
            <p>
                <input type="text" value="" id="url_match_val" />
            </p>
            <p>
                <input type="checkbox" name="click" class="event-rule"
                    data-event-name="click"
                    data-event-val="click_val" />
                <label for="url_match">Click</label>
            </p>
            <p>
                <input type="text" value="" id="click_val" />
            </p>
        </fieldset>
        <input type="button" id="save" value="Save"></input>
    </form>

    <div id="code_snippet"></div>

    <a href="demo.html">Demo</a>

    <script>
        document.getElementById('save').addEventListener('click', function () {
            var config = {};

            Array.prototype.forEach.call(document.querySelectorAll('.event-rule'), function (el) {
                var eventName,
                    eventValueId,
                    val;

                if (!el.checked) {
                    return;
                }

                eventName = el.getAttribute('data-event-name');
                eventValueId = el.getAttribute('data-event-val');

                if (eventValueId) {
                    val = document.getElementById(eventValueId).value;
                    if (val) {
                        config[eventName] = val;
                    }
                } else {
                    config[eventName] = true;
                }
            });
            document.getElementById('code_snippet').innerHTML = 'window.observer_events_config = ' +
                JSON.stringify(config) + ';';
        });
    </script>
</body>
</html>